(this.webpackJsonptodo_django=this.webpackJsonptodo_django||[]).push([[0],{40:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(41),s=n.n(a),r=(n(50),n(3)),i=n.n(r),l=n(10),o=n(2),u=(n(52),n(9)),d=n(7),j=n.n(d),b=n(42),m=n.n(b),p="https://todo.mbmishu.com/api",h=window.localStorage.getItem("token"),f=m.a.get("csrftoken"),O={"Content-Type":"application/json",Authorization:"token ".concat(h)},x={"Content-Type":"application/json","X-CSRFToken":f},g=n(0),v=Object(c.createContext)(),N=function(e){var t=e.reducer,n=e.initialstate,a=e.children;return Object(g.jsx)(v.Provider,{value:Object(c.useReducer)(t,n),children:a})},y=function(){return Object(c.useContext)(v)},k=function(e){var t=y(),n=Object(o.a)(t,2),c=n[0].profile,a=n[1],s=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()({method:"POST",url:"".concat(p,"/logout/"),headers:O}).then((function(e){window.localStorage.removeItem("token"),a({type:"ADD_PROFILE",profile:null}),window.location.href="/"})).catch((function(e){}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(g.jsx)(u.b,{className:"navbar-brand",to:"/",children:e.title}),Object(g.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(g.jsx)("span",{className:"navbar-toggler-icon"})}),Object(g.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(g.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(g.jsx)("li",{className:"nav-item active",children:Object(g.jsxs)(u.b,{className:"nav-link",to:"/",children:["Home"," "]})}),Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)(u.b,{className:"nav-link",to:"/Profile",children:"Profile"})})]}),null!==c?Object(g.jsx)(u.b,{className:"btn btn-outline-danger my-2 my-sm-0",onClick:s,children:"Logout"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("form",{className:"form-inline my-2 my-lg-0 mr-0 mr-lg-2",children:Object(g.jsx)(u.b,{to:"/login",children:Object(g.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Login"})})}),Object(g.jsx)("form",{className:"form-inline my-2 my-lg-0",children:Object(g.jsx)(u.b,{to:"/register",children:Object(g.jsx)("button",{className:"btn btn-warning my-2 my-sm-0",type:"submit",children:"Sign Up"})})})]})]})]})},w=function(e){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{scope:"row",children:e.serial}),Object(g.jsx)("td",{children:e.item.title}),Object(g.jsx)("td",{children:e.item.task_completed?"completed":"not completed"}),Object(g.jsx)("td",{children:Object(g.jsxs)("button",{className:"btn btn-primary",onClick:function(){e.updateData(e.item.id,e.item.title,e.item.task_completed)},children:[" ","Update"]})}),Object(g.jsx)("td",{children:Object(g.jsx)("button",{className:" btn btn-danger",onClick:function(){e.deleteData(e.item.id)},children:"Delete"})})]})})},S=n(6),C=n(80),T=n(81),D=new C.a,E="default-alert",P={onAlert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return D.asObservable().pipe(Object(T.a)((function(t){return t&&t.id===e})))},success:function(e,t){I(Object(S.a)(Object(S.a)({},t),{},{type:_,message:e}))},error:function(e,t){I(Object(S.a)(Object(S.a)({},t),{},{type:F,message:e}))},info:function(e,t){I(Object(S.a)(Object(S.a)({},t),{},{type:A,message:e}))},warn:function(e,t){I(Object(S.a)(Object(S.a)({},t),{},{type:L,message:e}))},alert:I,clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;D.next({id:e})}},_="Success",F="Error",A="Info",L="Warning";function I(e){e.id=e.id||E,D.next(e)}var R=n(20),q=n(44),U=n(4);function G(e){var t=e.id,n=e.fade,a=Object(U.g)(),s=Object(c.useState)([]),r=Object(o.a)(s,2),i=r[0],l=r[1];function u(e){if(n){var t=Object(S.a)(Object(S.a)({},e),{},{fade:!0});l((function(n){return n.map((function(n){return n===e?t:n}))})),setTimeout((function(){l((function(e){return e.filter((function(e){return e!==t}))}))}),250)}else l((function(t){return t.filter((function(t){return t!==e}))}))}function d(e){var t;if(e){var n=["alert","alert-dismissable"],c=(t={},Object(R.a)(t,_,"alert alert-success"),Object(R.a)(t,F,"alert alert-danger"),Object(R.a)(t,A,"alert alert-info"),Object(R.a)(t,L,"alert alert-warning"),t);return n.push(c[e.type]),e.fade&&n.push("fade"),n.join(" ")}}return Object(c.useEffect)((function(){var e=P.onAlert(t).subscribe((function(e){e.message?(l((function(t){return[].concat(Object(q.a)(t),[e])})),e.autoClose&&setTimeout((function(){return u(e)}),3e3)):l((function(e){var t=e.filter((function(e){return e.keepAfterRouteChange}));return t.forEach((function(e){return delete e.keepAfterRouteChange})),t}))})),n=a.listen((function(){P.clear(t)}));return function(){e.unsubscribe(),n()}}),[]),i.length?Object(g.jsx)("div",{className:"container",children:Object(g.jsx)("div",{className:"m-3",children:i.map((function(e,t){return Object(g.jsxs)("div",{className:d(e),children:[Object(g.jsx)("a",{className:"close",onClick:function(){return u(e)},children:"\xd7"}),Object(g.jsx)("span",{dangerouslySetInnerHTML:{__html:e.message}})]},t)}))})}):null}G.defaultProps={id:"default-alert",fade:!0};var M=function(){var e,t=y(),n=Object(o.a)(t,2),a=n[0].profile,s=(n[1],Object(c.useState)(null)),r=Object(o.a)(s,2),u=r[0],d=r[1],b=Object(c.useState)(null),m=Object(o.a)(b,2),h=m[0],f=m[1],x=Object(c.useState)(null),v=Object(o.a)(x,2);v[0],v[1];Object(c.useEffect)((function(){N()}),[]);var N=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()({method:"GET",url:"".concat(p,"/task-list/"),headers:O}).then((function(e){console.log(e.data),d(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()({method:"GET",url:null===u||void 0===u?void 0:u.previous,headers:O}).then((function(e){d(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()({method:"GET",url:null===u||void 0===u?void 0:u.next,headers:O}).then((function(e){d(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){console.log(e),j()({method:"DELETE",url:"".concat(p,"/task-delete/").concat(e,"/"),headers:O}).then((function(e){N(),P.error("You have deleted successfully!!",{id:"left-alert"})})).catch((function(e){console.log(e)}))},T=function(e,t,n){var c;c=!n,j()({method:"Post",url:"".concat(p,"/task-update/").concat(e,"/"),headers:O,data:{title:t,task_completed:c}}).then((function(e){N(),P.success(e.data.msg,{id:"left-alert"})})).catch((function(e){}))};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"container mt-4",children:[Object(g.jsx)(G,{id:"left-alert"}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsxs)("div",{className:"col-lg-5 col-md-5 my-auto mx-auto",children:[Object(g.jsx)("h2",{className:"text-center",children:"Add Todo in list"}),Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j()({method:"POST",url:"".concat(p,"/task-create/"),headers:O,data:{title:h,task_completed:!1,username:a.prouser}}).then((function(e){P.success(e.data.msg,{id:"left-alert"}),N(),f("")})).catch((function(e){P.error("Try Again!",{id:"left-alert"})}))},children:[Object(g.jsxs)("div",{className:"input-group mb-3",children:[Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("span",{className:"input-group-text",children:"Title"})}),Object(g.jsx)("input",{type:"text",name:"username",placeholder:"todo title",className:"form-control",onChange:function(e){f(e.target.value)},value:h,required:!0})]}),Object(g.jsx)("div",{className:"d-flex justify-content-center mt-3 mb-3 login_container",children:Object(g.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Add todo"})})]})]}),Object(g.jsxs)("div",{className:"col-lg-6 col-md-6",children:[Object(g.jsx)("h2",{className:"text-center",children:"My Task List"}),Object(g.jsxs)("table",{class:"table table-striped table-bordered table-hover",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{scope:"col",children:"#"}),Object(g.jsx)("th",{scope:"col",children:"Title"}),Object(g.jsx)("th",{scope:"col",children:"Completed"}),Object(g.jsx)("th",{scope:"col",children:"Details"}),Object(g.jsx)("th",{scope:"col",children:"Deleted"})]})}),Object(g.jsx)("tbody",{children:null!==u&&(null===(e=u.results)||void 0===e?void 0:e.map((function(e,t){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(w,{item:e,serial:t,deleteData:C,updateData:T},e.id)})})))})]})]})]}),Object(g.jsx)("nav",{"aria-label":"Page navigation example",children:Object(g.jsxs)("ul",{class:"pagination justify-content-end",children:[Object(g.jsx)("li",{class:"page-item",children:null!==(null===u||void 0===u?void 0:u.previous)?Object(g.jsx)("button",{onClick:k,class:"page-link",tabindex:"-1",children:"Previous"}):Object(g.jsx)("button",{class:"page-link",tabindex:"-1",disabled:!0,children:"Previous"})}),Object(g.jsx)("li",{class:"page-item",children:null!==(null===u||void 0===u?void 0:u.next)?Object(g.jsx)("button",{onClick:S,class:"page-link",children:"Next"}):Object(g.jsx)("button",{class:"page-link",disabled:!0,children:"Next"})})]})})]})})},B=function(){var e,t=Object(U.h)().id,n=Object(c.useState)(null),a=Object(o.a)(n,2),s=a[0],r=a[1];Object(c.useEffect)((function(){u()}),[]);var u=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()({method:"GET",url:"".concat(p,"/task-list-Details/").concat(t,"/"),headers:O}).then((function(e){console.log(e.data),r(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"container mt-5",children:null!==s&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("p",{children:["Title name - ",null===s||void 0===s?void 0:s.title]}),Object(g.jsxs)("p",{children:["Completed - ",s.completed?"is completd":"is not completed"]}),Object(g.jsxs)("p",{children:["Username - ",null===(e=s.username)||void 0===e?void 0:e.name]})]})})})},H=(n(40),function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),r=Object(o.a)(s,2),d=r[0],b=r[1],m=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,j()({method:"POST",url:"".concat(p,"/login/"),headers:x,data:{username:n,password:d}}).then((function(e){console.log(e.data.token),window.localStorage.setItem("token",e.data.token),window.location.href="/"})).catch((function(e){P.error("Invalid Credentials!",{id:"left-alert"})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"container h-100 mt-5",children:[Object(g.jsx)(G,{id:"left-alert"}),Object(g.jsx)("div",{className:"d-flex justify-content-center h-100",children:Object(g.jsxs)("div",{className:"user_card",children:[Object(g.jsx)("div",{className:"d-flex justify-content-center",children:Object(g.jsx)("h3",{id:"form-title",children:"LOGIN"})}),Object(g.jsx)("div",{className:"d-flex justify-content-center form_container",children:Object(g.jsxs)("form",{onSubmit:m,children:[Object(g.jsxs)("div",{className:"input-group mb-3",children:[Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("span",{className:"input-group-text",children:Object(g.jsx)("i",{className:"fas fa-user"})})}),Object(g.jsx)("input",{type:"text",name:"username",placeholder:"Username...",className:"form-control",onChange:function(e){a(e.target.value)},required:!0})]}),Object(g.jsxs)("div",{className:"input-group mb-2",children:[Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("span",{className:"input-group-text",children:Object(g.jsx)("i",{className:"fas fa-key"})})}),Object(g.jsx)("input",{type:"text",name:"password",placeholder:"Password...",className:"form-control",onChange:function(e){b(e.target.value)},required:!0})]}),Object(g.jsx)("div",{className:"d-flex justify-content-center mt-3 login_container",children:Object(g.jsx)("button",{className:"btn login_btn",type:"submit",children:"login"})})]})}),Object(g.jsx)("div",{className:"mt-4",children:Object(g.jsxs)("div",{className:"d-flex justify-content-center links",children:["Don't have an account?"," ",Object(g.jsx)(u.b,{to:"/register",className:"ml-2",children:"Sign Up"})]})})]})})]})})}),J=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(o.a)(s,2),i=r[0],l=r[1],d=Object(c.useState)(""),b=Object(o.a)(d,2),m=b[0],h=b[1],f=Object(c.useState)(""),O=Object(o.a)(f,2),v=O[0],N=O[1],y=Object(U.g)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"container h-100 mt-5",children:[Object(g.jsx)(G,{id:"left-alert"}),Object(g.jsx)("div",{className:"d-flex justify-content-center h-100",children:Object(g.jsxs)("div",{className:"user_card",children:[Object(g.jsx)("div",{className:"d-flex justify-content-center",children:Object(g.jsx)("h3",{id:"form-title",children:"Sign up"})}),Object(g.jsx)("div",{className:"d-flex justify-content-center form_container",children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m!==v?alert("Password not match try again !"):j()({method:"post",url:"".concat(p,"/register/"),headers:x,data:{username:n,email:i,password:m}}).then((function(e){e.data.user&&y.push("/login"),alert(e.data.msg)})).catch((function(e){P.error("Try again!",{id:"left-alert"})}))},children:[Object(g.jsxs)("div",{className:"input-group mb-3",children:[Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("span",{className:"input-group-text",children:Object(g.jsx)("i",{className:"fas fa-user"})})}),Object(g.jsx)("input",{type:"text",name:"username",placeholder:"Username...",className:"form-control",onChange:function(e){a(e.target.value)},required:!0})]}),Object(g.jsxs)("div",{className:"input-group mb-3",children:[Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("span",{className:"input-group-text",children:Object(g.jsx)("i",{className:"fas fa-user"})})}),Object(g.jsx)("input",{type:"email",name:"Email",placeholder:"Email...",className:"form-control",onChange:function(e){l(e.target.value)},required:!0})]}),Object(g.jsxs)("div",{className:"input-group mb-2",children:[Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("span",{className:"input-group-text",children:Object(g.jsx)("i",{className:"fas fa-key"})})}),Object(g.jsx)("input",{type:"text",name:"password",placeholder:"Password...",className:"form-control",onChange:function(e){h(e.target.value)},required:!0})]}),Object(g.jsxs)("div",{className:"input-group mb-2",children:[Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("span",{className:"input-group-text",children:Object(g.jsx)("i",{className:"fas fa-key"})})}),Object(g.jsx)("input",{type:"text",name:"password",placeholder:"Confirm Password...",className:"form-control",onChange:function(e){N(e.target.value)},required:!0})]}),Object(g.jsx)("div",{className:"d-flex justify-content-center mt-3 login_container",children:Object(g.jsx)("button",{className:"btn login_btn",type:"submit",children:"Sign Up"})})]})}),Object(g.jsx)("div",{className:"mt-4",children:Object(g.jsxs)("div",{className:"d-flex justify-content-center links",children:["Already have an account?"," ",Object(g.jsx)(u.b,{to:"/login",className:"ml-2",children:"Login"})]})})]})})]})})},z=function(){var e=y(),t=Object(o.a)(e,2),n=t[0].profile,a=t[1];console.log(n,"from profile page");var s=Object(c.useState)(null===n||void 0===n?void 0:n.name),r=Object(o.a)(s,2),u=r[0],d=r[1],b=Object(c.useState)(null),m=Object(o.a)(b,2),h=m[0],f=m[1],x=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("image",h),n.append("name",u),e.next=6,j()({method:"POST",url:"".concat(p,"/profileUpdate/"),headers:O,data:n}).then((function(e){console.log(e.data,"profile picture"),a({type:"PAGE_RELOAD",pageReload:e.data}),P.success(e.data.msg,{id:"left-alert"})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"container mt-5",children:[Object(g.jsx)(G,{id:"left-alert"}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-lg-3 col-md-3",children:Object(g.jsx)("img",{src:"".concat("https://todo.mbmishu.com").concat(null===n||void 0===n?void 0:n.image),alt:"",className:"img-fluid "})}),Object(g.jsxs)("div",{className:"col-lg-6 col-md-6",children:[Object(g.jsxs)("p",{children:[Object(g.jsx)("strong",{children:"Full name- "}),null===n||void 0===n?void 0:n.name]}),Object(g.jsxs)("form",{onSubmit:x,enctype:"multipart/form-data",children:[Object(g.jsxs)("div",{class:"form-group",children:[Object(g.jsx)("label",{for:"exampleInputEmail1",children:"full name"}),Object(g.jsx)("input",{type:"text",class:"form-control",id:"exampleInputEmail1",onChange:function(e){d(e.target.value)},value:u,required:!0})]}),Object(g.jsxs)("div",{class:"form-group",children:[Object(g.jsx)("label",{for:"exampleInputEmail1",children:"Upload image"}),Object(g.jsx)("input",{onChange:function(e){return f(e.target.files[0])},type:"file",class:"form-control",required:!0})]}),Object(g.jsx)("button",{type:"submit",class:"btn btn-primary",children:"update"})]})]})]})]})})};n(45);var W=function(){var e=y(),t=Object(o.a)(e,2),n=t[0],a=(n.profile,n.pageReload),s=t[1];return Object(c.useEffect)((function(){null!==h&&function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()({method:"Get",url:"".concat(p,"/profile/"),headers:O}).then((function(e){s({type:"ADD_Profile",profile:e.data})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(u.a,{children:Object(g.jsxs)(U.d,{children:[Object(g.jsx)(U.b,{exact:!0,path:"/login",children:Object(g.jsx)(H,{})}),Object(g.jsx)(U.b,{exact:!0,path:"/register",children:Object(g.jsx)(J,{})}),Object(g.jsx)(U.b,{exact:!0,path:"/",children:null===h?Object(g.jsx)(U.a,{to:"/login"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(k,{title:"My Todo List"}),Object(g.jsx)(M,{})]})}),Object(g.jsx)(U.b,{exact:!0,path:"/todo/:id",children:null===h?Object(g.jsx)(U.a,{to:"/login"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(k,{title:"My Todo List"}),Object(g.jsx)(B,{})]})}),Object(g.jsx)(U.b,{exact:!0,path:"/profile",children:null===h?Object(g.jsx)(U.a,{to:"/login"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(k,{title:"My Todo List"}),Object(g.jsx)(z,{})]})}),Object(g.jsxs)(U.b,{exact:!0,children:[Object(g.jsx)(k,{title:"My Todo List",login:!1}),Object(g.jsx)(M,{})]})]})})})},X=function(e,t){switch(t.type){case"ADD_Profile":return Object(S.a)(Object(S.a)({},e),{},{profile:t.profile});case"PAGE_RELOAD":return Object(S.a)(Object(S.a)({},e),{},{pageReload:t.pageReload});default:return e}},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};s.a.render(Object(g.jsx)(N,{initialstate:{profile:null,pageReload:null},reducer:X,children:Object(g.jsx)(W,{})}),document.getElementById("root")),Y()}},[[77,1,2]]]);
//# sourceMappingURL=main.bfff8d0f.chunk.js.map